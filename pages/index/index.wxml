<!--index.wxml-->
<navigation-bar title="Weixin" back="{{false}}" color="black" background="#FFF"></navigation-bar>
<scroll-view class="scrollarea" scroll-y type="list">
  <view class="container">
    <!-- å„¿ç«¥ä¿¡æ¯ä¸ä½™é¢å¡ç‰‡ -->
    <view class="card balance-card">
      <view class="child-info" bindtap="onSwitchChild">
        <view class="child-avatar">{{currentChild?.name?.charAt(0) || '?'}}</view>
        <view class="child-details">
          <view class="child-name">{{currentChild?.name || 'æœªé€‰æ‹©'}}</view>
          <view class="child-age">{{currentChild?.age || '--'}}å² | {{currentChild?.gender === 'male' ? 'ç”·' : 'å¥³'}}</view>
        </view>
        <view class="switch-icon">
          <text class="iconfont icon-right"></text>
        </view>
      </view>
      <view class="balance-section">
        <view class="balance-label">å½“å‰ä½™é¢</view>
        <view class="balance-amount">Â¥{{currentChild?.balance?.toFixed(2) || '0.00'}}</view>
      </view>
    </view>

    <!-- å¿«æ·æ“ä½œæŒ‰é’® -->
    <view class="quick-actions">
      <view class="action-btn" bindtap="onAddTransaction">
        <view class="action-icon add">
          <text>+</text>
        </view>
        <view class="action-text">è®°ä¸€ç¬”</view>
      </view>
      <view class="action-btn" bindtap="onViewStatistics">
        <view class="action-icon stats">
          <text>ğŸ“Š</text>
        </view>
        <view class="action-text">ç»Ÿè®¡</view>
      </view>
      <view class="action-btn" bindtap="onViewTasks">
        <view class="action-icon task">
          <text>âœ…</text>
        </view>
        <view class="action-text">ä»»åŠ¡</view>
      </view>
    </view>

    <!-- æœ€è¿‘äº¤æ˜“è®°å½• -->
    <view class="recent-section">
      <view class="section-header">
        <text class="section-title">æœ€è¿‘è®°å½•</text>
        <text class="view-all" bindtap="onViewAllTransactions">æŸ¥çœ‹å…¨éƒ¨</text>
      </view>
      
      <view class="transaction-list">
        <block wx:if="{{recentTransactions.length > 0}}">
          <view class="transaction-item" wx:for="{{recentTransactions}}" wx:key="id">
            <view class="transaction-icon {{item.type}}">
              <text>{{item.type === 'income' ? '+' : '-'}}</text>
            </view>
            <view class="transaction-info">
              <view class="transaction-desc">{{item.description}}</view>
              <view class="transaction-meta">
                <text class="transaction-category">{{item.categoryName}}</text>
                <text class="transaction-date">{{item.date}}</text>
              </view>
            </view>
            <view class="transaction-amount {{item.type === 'income' ? 'income-amount' : 'expense-amount'}}">
              {{item.type === 'income' ? '+' : '-'}}Â¥{{item.amount}}
            </view>
          </view>
        </block>
        <block wx:else>
          <view class="empty-state">
            <view class="empty-state-icon">ğŸ“</view>
            <view class="empty-state-text">æš‚æ— äº¤æ˜“è®°å½•</view>
          </view>
        </block>
      </view>
    </view>
  </view>
</scroll-view>
